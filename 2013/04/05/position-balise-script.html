<!DOCTYPE html>
<html lang="fr_BE">
    <head>
        <meta charset="utf-8" />
        
        <title>Où placer sa balise script ? | blog.leny.me</title>
        <meta name="author" content="Leny">
        
        <meta name="description" content="Dans ton cul !
Hum.

M’sieur, pourquoi on conseille partout, depuis plusieurs années, de placer ses balises script en fin du body ?

C’est une questio" />
        
        
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <meta property="og:title" content="Où placer sa balise script ?" />
        <meta property="og:site_name" content="blog.leny.me" />

        
        <meta property="og:image" content="undefined" />
        

        <link rel="shortcut icon" href="/favicon.png" />
        <link rel="alternate" href="/atom.xml" title="blog.leny.me" type="application/atom+xml" />
        <link rel="stylesheet" href="/styles/styles.css" media="screen" type="text/css" />
        <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    </head>


    <body>
        <div id="wrapper">
            <div id="toplinks">
                <a href="http://leny.me" rel="external">
                    leny.me
                </a>
                <a href="http://blog.leny.me">
                    blog.leny.me
                </a>
            </div>

            <header>
                <h1>
    <a href="/">
        blog.leny.me
    </a>
</h1>

            </header>

            <section id="content">
                
    

<article>
    <header class="tech">
        <h1>
            Où placer sa balise script ?
        </h1>
    </header>

    <div class="content">
        <p><em>Dans ton cul !</em></p>
<p>Hum.</p>
<blockquote>
<p>M’sieur, pourquoi on conseille partout, depuis plusieurs années, de placer ses balises script en fin du body ?</p>
</blockquote>
<p>C’est une question qui est revenue une paire de fois lors de mes cours, ainsi que dans d’autres occasions, alors autant faire un petit billet de blog.</p>
<p><strong>Note aux puristes:</strong> ce billet est la retranscription d’explications données à des élèves en développement web. À ce titre, il utilise certains raccourcis qui peuvent sembler simplistes (tout en étant corrects), et se permet d’omettre certains détails trop techniques (et inutile dans un contexte générique).</p>
<p>Avant toutes choses, il faut comprendre comment est interprêté une balise script lors du chargement d’une page : lorsque le parser html tombe sur une balise, quelle qu’elle soit, le parser l’interprête avant de passer à la suivante, jusqu’à ce que toutes les balises soient interprêtées.<br>Quand une balise <code>&lt;script&gt;</code> est rencontrée, il existe deux cas de figure : les <em>scripts inline</em> et les <em>fichiers de script externes</em>.  </p>
<p>Quand le parser tombe sur un script inline (une balise script qui entoure du code javascript directement dans le document html), le parsing du reste de la page est intérrompu le temps que le code soit exécuté.</p>
<p>Dans le cas d’un script externe, il faut en plus rajouter le temps de récupérer ce script externe sur le serveur, ce qui ralentit d’autant le chargement de la page.</p>
<p>Du coup, en plaçant les balises <code>&lt;script&gt;</code> dans le <code>&lt;head&gt;</code>, le chargement de la page est en pause tant que les scripts ne sont pas chargés et exécutés. Et comme le contenu de la page n’a pas encore été lu par le parser, le navigateur, pendant le chargement, affiche une page vide (blanche).</p>
<p>En plaçant les <code>&lt;script&gt;</code> tout en bas du <code>&lt;body&gt;</code>, l’effet est inverse : les éléments de la page ont été chargés et sont affichés, et le navigateur a probablement déjà interprêté tout le css en parallèle. Du coup, la mise en pause du chargement de la page le temps de l’interprétation des scripts est un événement moins bloquant : la page était déjà presque complètement chargée, le visiteur voit déjà la page, et le peut déjà commencer sa navigation.</p>
<hr>
<p>Bien sûr, tous les comportements décris ci-dessus sont <em>sensés</em> se passer très vite : l’interprétation d’un script devrait prendre une poignée de millisecondes, tout au plus.</p>
<p>Mais rien n’est sûr concernant la récupération du fichier sur le serveur : connexion lente, terminaux mobiles, quota de connexion… tout ces paramètres doivent être pris en compte, et c’est pour ça que depuis quelques années, avec la montée en importance de javascript (et donc des scripts un peu plus gros et complexes qu’avant) et l’importance de bonnes performances web (utilisations de terminaux mobiles souvent limités par l’infrastructure du réseau), on prend l’habitude de placer les balises <code>&lt;script&gt;</code> en fin de <code>&lt;body&gt;</code>.</p>
<h4 id="Liens_et_références">Liens et références</h4>
<p>Douglas Crockford a écrit une petite page qui regroupe <a href="http://javascript.crockford.com/script.html" target="_blank" rel="external">tout ce qu’il y a à savoir sur la balise script</a>.</p>

    </div>

    <footer>
        <span class="author">
            leny
        </span>
        <time datetime="2013-04-04T22:00:00.000Z">
            5 avr. 2013
        </time>
    </footer>
</article>

<div class="comments">
    <p>
        Il n'y a pas de module de <strong>commentaires</strong> sur ce blog, principalement pour éviter à devoir gérer avec les spams, la pub, les insultes, ...
    </p>
    <p>
        Toutefois, si vous avez quelque chose à dire/corriger/modifier, ou simplement exprimer votre opinion sur un post, n'hésitez pas à me contacter sur Twitter (<a href="//twitter.com/leny_be" rel="external">@leny_be</a>).
    </p>
</div>


            </section>

            <footer>
                <p>
    <span id="copyleft">&#61948;</span><a href="http://leny.me" rel="external">leny.me</a> - <a href="http://creativecommons.org/licenses/by-sa/4.0/deed.fr" rel="external">Contenu sous licence CC by-sa</a>
</p>
<p>
    Powered by <a href="http://zespia.tw/hexo/" rel="external">hexo</a>.<br />
    Theme by <a href="http://leny.me" rel="external">leny</a>, inspired by <a href="http://arturkim.com/" rel="external">Artur Kim</a>.
</p>

            </footer>
        </div>
        <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-39717980-3', 'leny.me');
  ga('send', 'pageview');
</script>

    </body>
</html>
